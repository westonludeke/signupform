<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sign Up Form</title>
  <!-- <link rel='stylesheet' href="styles.css"> -->
<style>
.form-group {
  margin-bottom: 10px;
}
.form-group input {
  padding: 5px;
  border-radius: 5px;
  border: 1px solid black;
}
.form-group label {
  display: inline-block;
  width: 100px;
}
.form-group.credit-card {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-gap: 10px;
  align-items: center;
}
.form-group.credit-card label {
  width: 100%;
}
.form-group.credit-card input {
  width: 100%;
  margin: 0;
}
.error-message {
  color: red;
  font-size: 12px;
  margin-left: 5px;
}
.submit-btn {
  margin-top: 10px;
  padding: 5px 10px;
  border-radius: 5px;
  background-color: #6495ED;
  color: white;
  border: none;
  cursor: pointer;
}
.submit-btn:hover {
  background-color: #1C4A9F;
}
.error-summary {
  color: red;
  font-weight: bold;
  margin-bottom: 10px;
  padding: 10px;
  text-align: center;
}

body {
  background-color: #88DAE3;
  font-family: Arial, sans-serif;
}

h1 {
  text-align: center;
}

form {
  max-width: 500px;
  margin: 0 auto;
  padding: 20px;
  background: #fff;
  border-radius: 8px;
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
}

label {
  display: block;
  margin-bottom: 8px;
  font-weight: bold;
}

input[type="text"],
input[type="email"],
input[type="password"],
input[type="tel"] {
  width: 100%;
  padding: 12px;
  border-radius: 4px;
  border: 1px solid #ccc;
  margin-bottom: 20px;
  box-sizing: border-box;
}

input[type="submit"] {
  background-color: #4CAF50;
  color: white;
  padding: 12px 20px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

input[type="submit"]:hover {
  background-color: #45a049;
}

.error {
  color: red;
  font-size: 12px;
  margin-left: 5px;
  display: inline;
}

input.error {
  border-color: red;
}

.error-message {
  color: red;
  font-size: 14px;
  margin-bottom: 20px;
}
</style>

</head>
<body>
  <h1>My Web App</h1>
  <form novalidate id="signupForm">
    <div class="form-group">
      <label for="first-name">First Name:</label>
      <span class="error-message" id="first-name-error"></span>
      <input type="text" id="first-name" name="first-name" required>
    </div>
    <div class="form-group">
      <label for="last-name">Last Name:</label>
      <span class="error-message" id="last-name-error"></span>
      <input type="text" id="last-name" name="last-name" required>
    </div>
    <div class="form-group">
      <label for="email">Email:</label>
      <span class="error-message" id="email-error"></span>
      <input type="email" id="email" name="email" required pattern=".+@.+" >
    </div>
    <div class="form-group">
      <label for="password">Password:</label>
      <span class="error-message" id="password-error"></span>
      <input type="password" id="password" name="password" required minlength="10">
    </div>
    <div class="form-group">
      <label for="phone">Phone:</label>
      <span class="error-message" id="phone-error"></span>
      <input type="tel" id="phone" name="phone" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}">
    </div>
    <div class="form-group credit-card">
      <label for="credit-card">Credit Card:</label><br>
      <span class="error-message" id="credit-card-error"></span><br>
      <input type="text" id="credit-card-1" name="credit-card-1">
      <input type="text" id="credit-card-2" name="credit-card-2">
      <input type="text" id="credit-card-3" name="credit-card-3">
      <input type="text" id="credit-card-4" name="credit-card-4">
    </div>
    <button type="submit" class="submit-btn">Sign Up</button>
  </form>
  <div class="error-summary" id="error-summary"></div>
<script>

document.addEventListener("DOMContentLoaded", function () {
  // Get form elements
  const firstName = document.getElementById("first-name");
  const lastName = document.getElementById("last-name");
  const email = document.getElementById("email");
  const password = document.getElementById("password");
  const phone = document.getElementById("phone");
  const creditCard1 = document.getElementById("credit-card-1");
  const creditCard2 = document.getElementById("credit-card-2");
  const creditCard3 = document.getElementById("credit-card-3");
  const creditCard4 = document.getElementById("credit-card-4");
  const submitBtn = document.querySelector(".submit-btn");
  const form = document.getElementById("signupForm");

  const creditCardInputs = document.querySelectorAll('input[name^="credit-card"]');
    creditCardInputs.forEach(input => {
      input.addEventListener('input', event => {
        const inputText = event.target.value;
        event.target.value = inputText.replace(/\D/g, '').substring(0, 4);
      });
    });

  // Attach event listeners to form elements
  firstName.addEventListener("blur", validateFirstName);
  lastName.addEventListener("blur", validateLastName);
  email.addEventListener("blur", validateEmail);
  password.addEventListener("blur", validatePassword);
  phone.addEventListener("blur", validatePhone);
  creditCard1.addEventListener("blur", validateCreditCard);
  creditCard2.addEventListener("blur", validateCreditCard);
  creditCard3.addEventListener("blur", validateCreditCard);
  creditCard4.addEventListener("blur", validateCreditCard);
  firstName.addEventListener("keypress", function (e) {
    validateFirstName(firstName, e);
  });
  lastName.addEventListener("keypress", function (e) {
    validateLastName(lastName, e);
  });
  submitBtn.addEventListener("click", submitForm);


  // Validate first name
  function validateFirstName() {
    const firstNameValue = firstName.value.trim();

    if (firstNameValue === "") {
      setError(firstName, "First name is required");
    } else if (!/^[a-zA-Z ]+([-][a-zA-Z]+)*$/.test(firstNameValue)) {
      setError(firstName, "First name should contain only letters");
    } else {
      setSuccess(firstName);
    }
  }

  // Validate last name
  function validateLastName() {
    const lastNameValue = lastName.value.trim();

    if (lastNameValue === "") {
      setError(lastName, "Last name is required");
    } else if (!/^[a-zA-Z ]+([-][a-zA-Z]+)*$/.test(lastNameValue)) {
      setError(lastName, "Last name should contain only letters"); 
    } else {
      setSuccess(lastName);
    }
  }

  // Validate email
  function validateEmail() {
    const emailValue = email.value.trim();
    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

    if (emailValue === "") {
      setError(email, "Email is required");
    } else if (!emailPattern.test(emailValue)) {
      setError(email, "Please enter a valid email address");
    } else {
      setSuccess(email);
    }
  }

  // Validate password
  function validatePassword() {
    const passwordValue = password.value.trim();

    if (passwordValue === "") {
      setError(password, "Password is required");
    } else if (passwordValue.length < 10) {
      setError(password, "Password must be at least 10 characters long");
    } else {
      setSuccess(password);
    }
  }

  // Validate phone
  function validatePhone() {
    const phoneValue = phone.value.trim();
    const phonePattern = /^\d{3}-\d{3}-\d{4}$/;

    if (phoneValue === "") {
      setSuccess(phone);
    } else if (!phonePattern.test(phoneValue)) {
      setError(phone, "Please enter a valid US-style phone number (e.g. 123-456-7890)");
    } else {
      setSuccess(phone);
    }
  }

  // Validate credit card
  function validateCreditCard() {
    const creditCardValue = creditCard1.value + creditCard2.value + creditCard3.value + creditCard4.value;

    if (creditCardValue === "") {
      setError(creditCard1, "Credit card number is required");
    } else if (!/^\d{16}$/.test(creditCardValue)) {
      setError(creditCard1, "Please enter a valid credit card number");
    } else {
      setSuccess(creditCard1);
      setSuccess(creditCard2);
      setSuccess(creditCard3);
      setSuccess(creditCard4);
    }
  }

  // Set error message and border for an input element
  function setError(input, message) {
    const parentElement = input.parentElement;
    const errorMessage = parentElement.querySelector(".error-message");

    errorMessage.innerText = message;
    parentElement.classList.add("error");
    input.classList.add("error");
  }

  // Remove error message and border for an input element
  function setSuccess(input) {
    const parentElement = input.parentElement;
    const errorMessage = parentElement.querySelector(".error-message");

    errorMessage.innerText = "";
    parentElement.classList.remove("error");
    input.classList.remove("error");
  }

  // Submit form and validate all form fields
  function submitForm(e) {
    e.preventDefault(); // prevent form from submitting by default

    // validate form before submitting
    validateFirstName();
    validateLastName();
    validateEmail();
    validatePassword();
    validatePhone();
    validateCreditCard();

    // check if any errors are present
    if (document.querySelectorAll(".error").length === 0) {
      // if no errors, submit the form
      form.submit();
    } else {
      // if errors are present, display error summary
      const errorSummary = document.getElementById("error-summary");
      errorSummary.innerHTML = "Please fix the errors in the form before submitting.";
    }
  }

  // Clear error summary when user starts correcting errors
  form.addEventListener("input", function () {
    const errorSummary = document.getElementById("errorSummary");
    errorSummary.innerText = "";
  });
});  

</script>
</body>
</html>
